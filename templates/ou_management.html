{% extends "base.html" %}

{% block title %}Gerenciamento de OUs{% endblock %}

{% from "_macros.html" import render_page_header %}

{% block page_title %}
    {{ render_page_header('<i class="fas fa-network-wired me-2"></i>Gerenciamento de Unidades Organizacionais') }}
{% endblock %}

{% block content %}
    {# Este é o ponto de entrada para a nossa aplicação React. #}
    <div id="react-ou-management-root">
        {# O React irá substituir este conteúdo. #}
    </div>
{% endblock %}

{% block scripts %}
    {{ super() }}

    {# Lógica para carregar os scripts do Vite #}
    {% if config.get('ENV') == 'development' %}
        <!-- Em desenvolvimento, carrega o cliente Vite e o nosso ponto de entrada. -->
        <script type="module">
            import RefreshRuntime from 'http://localhost:5173/@react-refresh'
            RefreshRuntime.injectIntoGlobalHook(window)
            window.$RefreshReg$ = () => {}
            window.$RefreshSig$ = () => (type) => type
            window.__vite_plugin_react_preamble_installed__ = true
        </script>
        <script type="module" src="http://localhost:5173/@vite/client"></script>
        <script type="module" src="http://localhost:5173/static/js/src/index.js"></script>
    {% else %}
        <!-- Em produção, carrega o bundle compilado dinamicamente pelo manifest.json. -->
        {% if vite_js_path %}
            <script type="module" src="{{ vite_js_path }}"></script>
        {% else %}
            <!-- Fallback ou mensagem de erro se o manifest não puder ser lido -->
            <script>
                console.error("Erro: O arquivo de manifesto do Vite não foi encontrado ou não pôde ser lido. Execute o build do frontend.");
            </script>
        {% endif %}
    {% endif %}
{% endblock %}